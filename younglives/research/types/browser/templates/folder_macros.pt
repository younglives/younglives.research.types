<div metal:define-macro="papers_by_year">
    <table class="research_table" tal:define="items python:view.getPapersByYear()">
        <thead>
            <th>Ref</th>
            <th>Author(s)</th>
            <th>Title</th>
            <th>Theme</th>
            <th>Methodology</th>
            <th>Country of Data</th>
            <th>Type of Output</th>
            <th>Paper Manager</th>
            <th>Paper Status</th>
        </thead>
        <tbody>
            <tr tal:repeat="item items">
                <td tal:content="item/id" />
                <td tal:content="item/getAllAuthors" />
                <td>
                    <a tal:attributes="href item/getURL;
                                       title item/getLastComment"
                       tal:content="item/rawTitle" />
                </td>
                <td tal:define="themes item/researchTheme"
                    tal:content="python:', '.join(themes)" />
                <td tal:content="item/researchMethodology" />
                <td tal:define="countries item/researchCountry"
                    tal:content="python:', '.join(countries)" />
                <td tal:define="outputs item/researchOutput"
                    tal:content="python:', '.join(outputs)" />
                <td tal:content="item/getPaperManagerFullName" />
                <td tal:define="state_info python:view.getStateInfo(item.review_state)"
                    tal:content="state_info/title" />
            </tr>
        </tbody>
    </table>
</div>
<div metal:define-macro="table_view">
    <table class="research_table">
        <thead>
            <th class="cell_ref">Ref</th>
            <th class="cell_authors">Authors</th>
            <th class="cell_title">Title</th>
        </thead>
        <tbody>
            <tr tal:repeat="item outputs">
                <td class="table_ref" tal:content="item/id" />
                <td class="cell_authors" tal:content="python:item.getObject().getAllAuthors(all=False)" />
                <td class="cell_title">
                    <a tal:attributes="href item/getURL"
                       tal:content="python:context.shortenTitle(item.Title)" />
                </td>
            </tr>
        </tbody>
    </table>
</div>
