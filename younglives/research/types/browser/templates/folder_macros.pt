<div metal:define-macro="papers_by_year">
    <table class="research_table" tal:define="items python:view.getPapersByYear()">
        <thead>
            <tr>
                <th>Ref</th>
                <th colspan="2">Author(s)</th>
                <th colspan="4">Title</th>
            </tr>
            <tr>
                <th>&nbsp;</th>
                <th>Theme</th>
                <th>Methodology</th>
                <th>Country of Data</th>
                <th>Type of Output</th>
                <th>Paper Manager</th>
                <th>Paper Status</th>
            </tr>
        </thead>
        <tbody>
            <tal:research_item repeat="item items">
                <tal:research_defines define="oddrow repeat/item/odd;
                                              odd_class python:oddrow and 'odd' or 'even'">
                    <tr tal:attributes="class odd_class">
                        <td tal:content="item/id" />
                        <td colspan="2" tal:content="item/getAllAuthors" />
                        <td colspan="4">
                            <a tal:attributes="href item/getURL;
                                               title item/getLastComment"
                               tal:content="item/rawTitle" />
                        </td>
                    </tr>
                    <tr tal:attributes="class odd_class">
                        <td>&nbsp;</td>
                        <td tal:define="themes item/researchTheme"
                            tal:content="python:', '.join(themes)" />
                        <td tal:content="item/researchMethodology" />
                        <td tal:define="countries item/researchCountry"
                            tal:content="python:', '.join(countries)" />
                        <td tal:define="outputs item/researchOutput"
                            tal:content="python:', '.join(outputs)" />
                        <td tal:content="item/getPaperManagerFullName" />
                        <td tal:define="state_info python:view.getStateInfo(item.review_state)"
                            tal:content="state_info/title" />
                    </tr>
                </tal:research_defines>
            </tal:research_item>
        </tbody>
    </table>
</div>
<div metal:define-macro="table_view">
    <table class="research_table">
        <thead>
            <th class="cell_ref">Ref</th>
            <th class="cell_authors">Authors</th>
            <th class="cell_title">Title</th>
        </thead>
        <tbody>
            <tr tal:repeat="item outputs">
                <td class="table_ref" tal:content="item/id" />
                <td class="cell_authors" tal:content="python:item.getObject().getAllAuthors(all=False)" />
                <td class="cell_title">
                    <a tal:attributes="href item/getURL"
                       tal:content="python:context.shortenTitle(item.Title)" />
                </td>
            </tr>
        </tbody>
    </table>
</div>
